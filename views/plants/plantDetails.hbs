<div class="plants-box">
{{#with plant}}
<h1 style="text-align: center;">{{species}}</h1>
<div class="plant-details-size-owner">
<p style="margin-right: 5%;"><strong>{{size}}</strong></p> 
<p>by <a href="/profiles/{{user._id}}">{{user.username}}</a></p>
</div>
<div class="plant-details-description">
<p>{{description}}</p>
<br>
<p> <a class="contact-button"href="mailto:{{user.email}}" target="_blank">Contact {{user.username}}</a> </p>
<br>
<img src="{{imgPath}}" alt="" class="my-plant-image">

<p>Pick up at üìç <span>{{user.street}} {{user.house}} {{user.city}} {{user.zip}} {{user.country}}</span></p>

</div> 

 

 <div class="map-box">
<div id='map' class="profile-map"></div>
 </div>

<script src="https://unpkg.com/es6-promise@4.2.4/dist/es6-promise.auto.min.js"></script>
<script src="https://unpkg.com/@mapbox/mapbox-sdk/umd/mapbox-sdk.min.js"></script>
<script>
    let queryString="";
    let queryThings=document.querySelectorAll("span");
    for (thing of queryThings) {
        queryString+=thing.innerText+" ";
    }
	mapboxgl.accessToken = 'pk.eyJ1IjoibXJ6c3p0ayIsImEiOiJja2NicXFtcHMyN2RrMnZtZ2JwY2prMXFtIn0.Kve-wkiKTqkaXiD3fgG0MA';
    var mapboxClient = mapboxSdk({ accessToken: mapboxgl.accessToken });
    mapboxClient.geocoding
        .forwardGeocode({
            query: queryString,
            autocomplete: false,
            limit: 1
        })
        .send()
        .then(function(response) {
            if (
                response &&
                response.body &&
                response.body.features &&
                response.body.features.length
            ) {
                var feature = response.body.features[0];
                var map = new mapboxgl.Map({
                    container: 'map',
                    style: 'mapbox://styles/mapbox/streets-v11',
                    center: feature.center,
                    zoom: 10
                });
                new mapboxgl.Marker().setLngLat(feature.center).addTo(map);
            }
        });
</script>

{{/with}} 
</div> 